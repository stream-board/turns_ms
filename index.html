<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Project Architecture Turns</title>
    <link rel="stylesheet" href="">
</head>
<body>
    <div class="chat js-feak-info" data-sender="usuario">
    <h1>Stream board turns</h1>
    <button type="" class="js-ask-permission" data-user-id="1" data-user-nick="Usuario12">Pedir permiso</button>
    <button type="" class="js-set-admin" data-user-id="3" data-user-nick="AdminRoom">Ser administrador</button>
    <button type="" class="js-register-room" data-user-id="1" data-user-nick="Usuario12">Activarme en la sala</button>

    </div>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reconnecting-websocket/1.0.0/reconnecting-websocket.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(function(){
            var socket = io();
            //ask if user is the room's admin: yes-> set admin ? -> register id
            $('.js-set-admin').on('click', function() {
                var adminId = $(this).data('user-id');
                socket.emit('set admin id', adminId);
            });

            $('.js-ask-permission').on('click', function() {
                var userId = $(this).data('user-id');
                var userNick = $(this).data('user-nick');
                socket.emit('ask for board', userId, userNick);
            });

            socket.on('ask for board', function(userId, userNick) {
                alert('user '+ userNick + ' want permissions for board');
                //if 'yes' do http POST request to board-ms
            });
        })
    </script>
</body>

</html>
